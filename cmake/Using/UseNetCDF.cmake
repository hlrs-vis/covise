MACRO(USE_NETCDF)
  FIND_PACKAGE(NetCDF)
  USE_HDF5(optional)
  IF ((NOT NETCDF_FOUND) AND (${ARGC} LESS 1))
    USING_MESSAGE("Skipping because of missing NETCDF")
    RETURN()
  ENDIF((NOT NETCDF_FOUND) AND (${ARGC} LESS 1))
  IF(NOT NETCDF_USED AND NETCDF_FOUND)
    SET(NETCDF_USED TRUE)
    INCLUDE_DIRECTORIES(${NETCDF_INCLUDE_DIR})
    SET(EXTRA_LIBS ${EXTRA_LIBS} ${NETCDF_LIBRARIES} ${NETCDF_C++_LIBRARY})
  ENDIF()
ENDMACRO(USE_NETCDF)

